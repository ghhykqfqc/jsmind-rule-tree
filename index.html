<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=8">
  <!-- <link rel="stylesheet" type="text/css" href="./dist/kmsjsmap.min.css"> -->
  <link rel="stylesheet" type="text/css" href="./src/kmsjsmap.css">
  <title>jsMind规则树demo</title>
  <style>
  #jsmind_container {
    height: 960px;
  }
  </style>
</head>

<body>
  <a id="saveBtn" href="javascript: void(0);" class="sui-btn btn-xlarge btn-primary">保存</a>
  <a id="screenShot" href="javascript: void(0);" class="sui-btn btn-xlarge btn-primary">截图</a>
  <div id="jsmind_container"></div>
  <script type="text/javascript" src="./lib/jquery.min.js"></script>
  <!-- <script src="./dist/kmsjsmap.min.js" type="text/javascript"></script> -->
  <script type="text/javascript" src="./src/kmsjsmap.js"></script>
  <!-- <script type="text/javascript" src="./lib/jsmind.js"></script> -->
  <script type="text/javascript">
    kmsjsmap.init({
      container: "jsmind_container",
      data: [
        { "id": "root", "isroot": true, "topic": "全部满足" },
        { "id": "sub2", "parentid": "root", "topic": "全部满足", "badge": 66, "direction": "right" },
        { "id": "sub21", "parentid": "sub2", "topic": "a<b", "badge": 233 },
        { "id": "sub22", "parentid": "sub2", "topic": "a>c", "badge": 9 },
        { "id": "sub23", "parentid": "sub2", "topic": "b<c", "badge": 7, "isLink": true },
        { "id": "sub24", "parentid": "sub2", "topic": "b<d", "badge": 77 },

        { "id": "sub3", "parentid": "root", "topic": "满足其一", "badge": 45, "direction": "right" },
        { "id": "sub31", "parentid": "sub3", "topic": "a>b", "badge": 1 },
        { "id": "sub32", "parentid": "sub3", "topic": "a<d", "badge": 2 },
        { "id": "sub33", "parentid": "sub3", "topic": "b>c", "badge": 3 },
        { "id": "sub34", "parentid": "sub3", "topic": "全部满足", "badge": 4, "expanded": false },

        { "id": "sub341", "parentid": "sub34", "topic": "a<d"},
        { "id": "sub342", "parentid": "sub34", "topic": "c<d"}
      ],
      editable: true,
      onRelation: function(item) {
        console.log('当前选择中的是', item)
        kmsjsmap.setLinkStatus({
          id: item.id,
          isLink: item.data.isLink === true ? false : true
        })
      },
      view: {
        line_style: 'straight'
      }
    });

    $('#saveBtn').click(function() {
      kmsjsmap.save(function(data) {
        console.log('啦啦啦啦', data)
      })
    })

    $('#screenShot').click(function() {
      kmsjsmap.screenshot()
    })
  </script>
</body>

</html>